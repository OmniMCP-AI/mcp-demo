[ğŸ‡ºğŸ‡¸ View English Version (English Doc)](README.md)

## ğŸŒ ä»€ä¹ˆæ˜¯ MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ŒModel Context Protocolï¼‰ï¼Ÿ

MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ŒModel Context Protocolï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œæ—¨åœ¨æ ‡å‡†åŒ–åº”ç”¨å¦‚ä½•ä¸ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æä¾›ä¸Šä¸‹æ–‡ã€‚å¯ä»¥æŠŠ MCP çœ‹ä½œ AI åº”ç”¨çš„"USB-C æ¥å£"ï¼Œä¸ºæ¨¡å‹ä¸å„ç§æ•°æ®æºå’Œå·¥å…·ä¹‹é—´çš„è¿æ¥æä¾›ç»Ÿä¸€æ ‡å‡†ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© MCPï¼Ÿ

- æä¾›ä¸°å¯Œçš„é¢„æ„å»ºé›†æˆï¼ŒLLM å¯ç›´æ¥æ¥å…¥
- çµæ´»åˆ‡æ¢ä¸åŒçš„ LLM æœåŠ¡å•†å’Œä¾›åº”å•†
- éµå¾ªæœ€ä½³å®‰å…¨å®è·µï¼Œä¿æŠ¤æœ¬åœ°å’Œè¿œç¨‹æ•°æ®

### é€šç”¨æ¶æ„

MCP é‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼Œä¸»è¦åŒ…æ‹¬ï¼š

- **MCP Host**ï¼šå¦‚ Claude Desktopã€IDE æˆ– AI å·¥å…·ï¼Œä½œä¸ºæ•°æ®è®¿é—®å…¥å£
- **MCP Client**ï¼šåè®®å®¢æˆ·ç«¯ï¼Œç»´æŠ¤ä¸æœåŠ¡å™¨çš„ 1:1 è¿æ¥
- **MCP Server**ï¼šè½»é‡çº§æœåŠ¡ç«¯ï¼Œé€šè¿‡æ ‡å‡†åè®®æš´éœ²ç‰¹å®šèƒ½åŠ›
- **æœ¬åœ°æ•°æ®æº**ï¼šå¦‚æœ¬åœ°æ–‡ä»¶ã€æ•°æ®åº“å’ŒæœåŠ¡
- **è¿œç¨‹æœåŠ¡**ï¼šå¦‚äº’è”ç½‘ APIã€å¤–éƒ¨ç³»ç»Ÿç­‰

### å…¸å‹åº”ç”¨åœºæ™¯

- æ„å»ºé›†æˆå¤šæ•°æ®æºå’Œå·¥å…·çš„æ™ºèƒ½ä½“/AI å·¥ä½œæµ
- è®© LLM é€šè¿‡æ ‡å‡†åè®®å®‰å…¨è®¿é—®æœ¬åœ°æˆ–è¿œç¨‹èµ„æº
- å¿«é€Ÿé›†æˆå’Œåˆ‡æ¢ä¸åŒçš„ LLM åŠå…¶èƒ½åŠ›

æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ [MCP å®˜æ–¹æ–‡æ¡£](https://modelcontextprotocol.io/introduction)ã€‚

# ğŸš€ OmniMCP å¹³å°ï¼šç‹¬ç‰¹çš„é›†æˆä¸ API è½¬æ¢ç‰¹æ€§

## â­ å°†ä½ çš„ MCP é¡¹ç›®æ·»åŠ åˆ° OmniMCP å¹³å°ï¼ˆomnimcp.aiï¼‰

**OmniMCP ä¸ä»…æ˜¯ä¸€ä¸ªéƒ¨ç½²å¹³å°ï¼Œæ›´æ˜¯æ•´ä¸ª MCP ç”Ÿæ€çš„å±•ç¤ºä¸é›†æˆä¸­å¿ƒï¼**

å¦‚æœä½ æ˜¯å¼€å‘è€…æˆ–ç”¨æˆ·ï¼Œæƒ³å°†ä½ çš„ MCP é¡¹ç›®ï¼ˆæˆ–ä½ æ„Ÿå…´è¶£çš„ä»»ä½• MCPï¼‰æ·»åŠ åˆ° [OmniMCP å¹³å°](https://omnimcp.ai)ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### æäº¤æµç¨‹
1. **å‡†å¤‡ä½ çš„é¡¹ç›®ä»“åº“**ï¼ˆGitHubã€Gitee æˆ–ä»»ä½•å¯è®¿é—®çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼‰ã€‚
2. **è®¿é—® [https://omnimcp.ai](https://omnimcp.ai)**ï¼Œé€šè¿‡å¹³å°çš„æ·»åŠ é¡¹ç›®ç•Œé¢æäº¤ä»“åº“é“¾æ¥ã€‚

   ![image](https://github.com/user-attachments/assets/7e26e7e3-86e9-4006-b7bb-f5a9a712681e)

### è¦æ±‚
1. **MCP åè®®å…¼å®¹ï¼š**
   - ä½ çš„é¡¹ç›®å¿…é¡»å®ç° MCP åè®®ã€‚
2. **æ”¯æŒ stdio æ¨¡å¼ï¼š**
   - ä½ çš„é¡¹ç›®å¿…é¡»èƒ½ä»¥ `stdio` æ¨¡å¼å¯åŠ¨ï¼ˆæœªæ¥å°†æ”¯æŒ `sse` å’Œ `streamable-http`ï¼‰ã€‚
3. **Dockerfileï¼ˆå¯é€‰ä½†æ¨èï¼‰ï¼š**
   - æ¨èæä¾› `Dockerfile` ä»¥ä¾¿äºéƒ¨ç½²ã€‚å¦‚æœæ²¡æœ‰ï¼Œå¹³å°ä¼šè‡ªåŠ¨ç”Ÿæˆ Dockerfile è¿›è¡Œéƒ¨ç½²ã€‚

**æŒ‰ç…§ä¸Šè¿°è¦æ±‚ï¼Œä½ çš„ MCP é¡¹ç›®å°†èƒ½è½»æ¾é›†æˆå¹¶å±•ç¤ºåœ¨ OmniMCP å¹³å°ï¼Œè®©æ›´å¤šäººè®¿é—®å’Œä½¿ç”¨ã€‚**

---

## ğŸŒŸã€ç‹¬å®¶ã€‘ä¸€é”®å°†ä»»æ„ API è½¬æ¢ä¸º MCP æœåŠ¡å™¨

**OmniMCP æä¾›ç‹¬ç‰¹çš„è¡Œä¸šé¢†å…ˆåŠŸèƒ½ï¼šä¸€é”®å°†ä»»ä½•å…¼å®¹ OpenAPI 3.0 çš„ API è½¬æ¢ä¸ºå®Œæ•´çš„ MCP æœåŠ¡å™¨ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼**

### å¦‚ä½•ä½¿ç”¨æ­¤åŠŸèƒ½
1. **å‡†å¤‡ OpenAPI 3.0 è§„èŒƒæ–‡æ¡£**
   - å¦‚æœä½ çš„ API å·²æœ‰ OpenAPI 3.0ï¼ˆSwaggerï¼‰æ–‡æ¡£ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼›å¦åˆ™è¯·ä¸ºä½ çš„ API ç”Ÿæˆä¸€ä¸ªã€‚
   - ç¤ºä¾‹ OpenAPI 3.0 JSONï¼š

```json
{
  "openapi": "3.0.0",
  "info": {
    "title": "Simple API",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3000"
    }
  ],
  "paths": {
    "/users": {
      "post": {
        "summary": "Create a new user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          }
        },
        "required": ["name", "email"]
      }
    }
  }
}
```

2. **æäº¤ OpenAPI æ–‡æ¡£é“¾æ¥**
   - è®©ä½ çš„ OpenAPI 3.0 æ–‡æ¡£å¯é€šè¿‡å…¬ç½‘ URL è®¿é—®ï¼ˆå¦‚ GitHub raw é“¾æ¥ã€Web æœåŠ¡å™¨ç­‰ï¼‰ã€‚
   - è®¿é—® [https://omnimcp.ai](https://omnimcp.ai)ï¼Œåœ¨ API-to-MCP æäº¤è¡¨å•ä¸­ç²˜è´´é“¾æ¥å¹¶æäº¤ã€‚

   ![image](https://github.com/user-attachments/assets/8bbf984a-7586-4c88-9103-3a14921364ec)

3. **è‡ªåŠ¨è½¬æ¢ä¸å¢å¼º**
   - æäº¤åï¼ŒOmniMCP å¹³å°ä¼šè‡ªåŠ¨å°†ä½ çš„ API è½¬æ¢ä¸º MCP æœåŠ¡å™¨ã€‚
   - å¹³å°è¿˜ä¼šåˆ†æå’Œå¢å¼ºä½ çš„ API æ–‡æ¡£ï¼ˆå¦‚ API æè¿°ã€å‚æ•°è¯´æ˜ï¼‰ï¼Œä¼˜åŒ–å…¶å¯¹ AI Agent çš„å‹å¥½æ€§ã€‚

å¾ˆå¿«ï¼Œä½ çš„ API å°±ä¼šä½œä¸º MCP æœåŠ¡å™¨åœ¨å¹³å°ä¸Šçº¿ï¼Œä¾› AI Agent å’Œå…¶ä»–å®¢æˆ·ç«¯é›†æˆå’Œä½¿ç”¨ã€‚

![image](https://github.com/user-attachments/assets/f92b4cd2-7320-4304-886e-2df0164c53d3)

**è¿™äº›ç‰¹æ€§è®© OmniMCP æˆä¸ºæœ€é€‚åˆå¼€å‘è€…å’Œ AI åœºæ™¯çš„ MCP å¹³å°ï¼Œè®©ä½ ä»¥å‰æ‰€æœªæœ‰çš„ä¾¿æ·æ–¹å¼åˆ†äº«ã€éƒ¨ç½²å’Œè½¬æ¢å·¥å…·ä¸ APIï¼**

---

# mcp-demo

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº [fastmcp](https://github.com/jlowin/fastmcp) çš„æœ€å°åŒ–æ¼”ç¤ºï¼Œä½¿ç”¨ Python 3.12 å’Œ [uv](https://github.com/astral-sh/uv) è¿›è¡Œä¾èµ–å’Œè¿›ç¨‹ç®¡ç†ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„ MCP æœåŠ¡ï¼ˆåŠ æ³•å·¥å…·ï¼‰ï¼Œå¹¶æ”¯æŒ Docker éƒ¨ç½²ã€‚

## 1. é¡¹ç›®æ¦‚è¿°

- åŸºäº fastmcp æ¡†æ¶ï¼Œæ”¯æŒ MCP åè®®
- æä¾›ä¸€ä¸ªç®€å•çš„åŠ æ³•å·¥å…·ï¼ˆ`add`ï¼‰
- ä½¿ç”¨ uv è¿›è¡Œä¾èµ–ç®¡ç†å’Œè¿›ç¨‹è¿è¡Œ
- é€šè¿‡ HTTP æš´éœ²æœåŠ¡ï¼ˆé»˜è®¤ï¼š`0.0.0.0:8000/mcp`ï¼‰

## 2. å¼€å‘ç¯å¢ƒ

- Python 3.12
- uvï¼ˆç”¨äºè™šæ‹Ÿç¯å¢ƒã€ä¾èµ–å’Œè¿›ç¨‹ç®¡ç†ï¼‰
- fastmcpï¼ˆä½œä¸ºä¾èµ–å®‰è£…ï¼‰

### å®‰è£…ä¾èµ–ï¼ˆç‰ˆæœ¬é”å®šï¼‰

1. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–ï¼š**

   ```bash
   uv venv --python=3.12
   uv pip install -r requirements.txt
   ```

2. **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š**

   - Unix/macOS:
     ```bash
     source .venv/bin/activate
     ```
   - Windows:
     ```cmd
     .\.venv\Scripts\activate
     ```

   æ¿€æ´»åå³å¯åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨ `uv run server.py` æˆ–å…¶ä»–å‘½ä»¤ã€‚

## 3. å¦‚ä½•å¼€å‘å’Œæ·»åŠ æ–°å·¥å…·

1. åœ¨ `server.py` ä¸­ç”¨ `@mcp.tool()` è£…é¥°å™¨å®šä¹‰ä½ çš„å·¥å…·å‡½æ•°ã€‚ä¾‹å¦‚ï¼š

```python
@mcp.tool()
def add(a: int, b: int) -> int:
    """Add two numbers"""
    return a + b
```

2. å¯åŠ¨æœåŠ¡åï¼Œè¯¥å·¥å…·å³å¯é€šè¿‡ MCP å®¢æˆ·ç«¯è°ƒç”¨ã€‚

## 4. å¦‚ä½•å¯åŠ¨æœåŠ¡

æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆè§ä¸Šæ–‡ï¼‰åï¼Œä½¿ç”¨ uv å¯åŠ¨æœåŠ¡ï¼š

```bash
uv run server.py
```

å®¹å™¨å†…æœåŠ¡åœ°å€ä¸º `http://0.0.0.0:8000/sse`

**æ³¨æ„ï¼š**
- Dockerfile ä¼šå®‰è£… uv å¹¶ä»¥ `uv run server.py` ä½œä¸ºé»˜è®¤å‘½ä»¤ï¼Œä¿è¯æœ¬åœ°å¼€å‘ä¸€è‡´æ€§ã€‚
- å¦‚æœæ·»åŠ äº† `requirements.txt`ï¼ŒDocker ä¼šç”¨ `uv pip install -r requirements.txt` å®‰è£…ä¾èµ–ã€‚

---

å¦‚éœ€æ·»åŠ æ›´å¤šå·¥å…·ï¼Œåªéœ€åœ¨ `server.py` ä¸­æ‰©å±•æ–°çš„ `@mcp.tool()` å‡½æ•°ã€‚

## 5. Docker éƒ¨ç½²

### åœ¨ Dockerfile ä¸­è®¾ç½®å¯åŠ¨æ¨¡å¼

ä½ å¯ä»¥é€šè¿‡ç¼–è¾‘ Dockerfile çš„ `CMD` æŒ‡ä»¤ç›´æ¥æŒ‡å®šå¯åŠ¨æ¨¡å¼ï¼ˆtransportï¼‰ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ stdio æ¨¡å¼ï¼š

```dockerfile
CMD ["uv", "run", "server.py", "--transport", "stdio"]
```

ä½¿ç”¨ SSE æ¨¡å¼ï¼š

```dockerfile
CMD ["uv", "run", "server.py", "--transport", "sse"]
```